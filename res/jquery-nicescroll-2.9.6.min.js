(function(b){function i(){var a=document.getElementsByTagName("script");var b=a[a.length-1].src.split("?")[0];return b.split("/").length>0?b.split("/").slice(0,-1).join("/")+"/":""}function q(a,b,c){for(var d=0;d<b.length;d++)c(a,b[d])}var c=false;var d=false;var e=false;var f=5e3;var g=2e3;var h=b;var j=i();var k=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||false}();var l=function(){return window.cancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||false}();var m=function(a,b){function t(a,b,c){var d=a.css(b);var f=parseFloat(d);if(isNaN(f)){f=s[d]||0;var g=f==3?c?e.win.outerHeight()-e.win.innerHeight():e.win.outerWidth()-e.win.innerWidth():1;if(e.isie8&&f)f+=1;return g?f:0}return f}var e=this;this.version="2.9.6";this.name="nicescroll";this.me=b;this.opt={doc:h("body"),win:false,zindex:9e3,cursoropacitymin:0,cursoropacitymax:1,cursorcolor:"#424242",cursorwidth:"5px",cursorborder:"1px solid #fff",cursorborderradius:"5px",scrollspeed:60,mousescrollstep:8*5,touchbehavior:false,hwacceleration:true,usetransition:true,boxzoom:false,dblclickzoom:true,gesturezoom:true,grabcursorenabled:true,autohidemode:true,background:"",iframeautoresize:true,cursorminheight:20,preservenativescrolling:true,railoffset:false,bouncescroll:false,spacebarenabled:true,railpadding:{top:0,right:0,left:0,bottom:0},disableoutline:true};if(a||false){for(var i in e.opt){if(typeof a[i]!="undefined")e.opt[i]=a[i]}}var m=document.createElement("DIV");this.isopera="opera"in window;this.isie="all"in document&&"attachEvent"in m&&!this.isopera;this.isieold=this.isie&&!("msInterpolationMode"in m.style);this.isie7=this.isie&&!this.isieold&&(!("documentMode"in document)||document.documentMode==7);this.isie8=this.isie&&"documentMode"in document&&document.documentMode==8;this.isie9=this.isie&&"performance"in window&&document.documentMode>=9;this.isie9mobile=/iemobile.9/i.test(navigator.userAgent);this.isie7mobile=!this.isie9mobile&&this.isie7&&/iemobile/i.test(navigator.userAgent);this.ismozilla="MozAppearance"in m.style;this.ischrome="chrome"in window;this.cantouch="ontouchstart"in document.documentElement;this.hasmstouch=window.navigator.msPointerEnabled||false;this.isios=this.cantouch&&/iphone|ipad|ipod/i.test(navigator.platform);this.isios4=this.isios&&!("seal"in Object);this.doc=e.opt.doc;this.iddoc=this.doc&&this.doc[0]?this.doc[0].id||"":"";this.ispage=/BODY|HTML/.test(e.opt.win?e.opt.win[0].nodeName:this.doc[0].nodeName);this.haswrapper=e.opt.win!==false;if(this.isie&&!this.isie9){this.win=e.opt.win||(this.ispage?h("html"):this.doc);this.docscroll=this.ispage&&!this.haswrapper?h("html"):this.win}else{this.win=e.opt.win||(this.ispage?h(window):this.doc);this.docscroll=this.ispage&&!this.haswrapper?h(window):this.win}this.body=h("body");this.iframe=false;this.isiframe=this.doc[0].nodeName=="IFRAME"&&this.win[0].nodeName=="IFRAME";this.istextarea=this.win[0].nodeName=="TEXTAREA";this.onmousedown=false;this.onmouseup=false;this.onmousemove=false;this.onmousewheel=false;this.onkeypress=false;this.ongesturezoom=false;this.onclick=false;this.view=false;this.page=false;this.scroll={x:0,y:0};this.scrollratio={x:0,y:0};this.cursorheight=20;this.scrollvaluemax=0;this.scrollmom=false;do{this.id="ascrail"+g++}while(document.getElementById(this.id));this.rail=false;this.cursor=false;this.cursorfreezed=false;this.zoom=false;this.zoomactive=false;this.hasfocus=false;this.hasmousefocus=false;this.visibility=true;this.locked=false;this.hidden=false;this.nativescrollingarea=false;this.events=[];this.saved={};this.delaylist={};this.synclist={};this.lastdelta=0;if(e.opt.hwacceleration){this.trstyle=window.opera?"OTransform":document.all?"msTransform":m.style.webkitTransform!==undefined?"webkitTransform":m.style.MozTransform!==undefined?"MozTransform":false;if(this.trstyle&&typeof m.style[this.trstyle]=="undefined")this.trstyle=false;this.hastransform=this.trstyle!=false;if(this.hastransform){m.style[this.trstyle]="translate3d(1px,2px,3px)";this.hastranslate3d=/translate3d/.test(m.style[this.trstyle])}this.transitionstyle=false;this.prefixstyle="";this.transitionend=false;var o=["transition","webkitTransition","MozTransition","OTransition","msTransition","KhtmlTransition"];var p=["","-webkit-","-moz-","-o-","-ms-","-khtml-"];var q=["transitionEnd","webkitTransitionEnd","transitionend","oTransitionEnd","msTransitionEnd","KhtmlTransitionEnd"];for(var i=0;i<o.length;i++){if(o[i]in m.style){this.transitionstyle=o[i];this.prefixstyle=p[i];this.transitionend=q[i];break}}this.hastransition=this.transitionstyle}else{this.trstyle=false;this.hastransform=false;this.hastranslate3d=false;this.transitionstyle=false;this.hastransition=false;this.transitionend=false}this.cursorgrabvalue="";if(e.opt.grabcursorenabled&&e.opt.touchbehavior){function r(){var a=["-moz-grab","-webkit-grab","grab"];if(e.ischrome||e.isie)a=[];for(var b=0;b<a.length;b++){var c=a[b];m.style["cursor"]=c;if(m.style["cursor"]==c)return c}return"url(http://www.google.com/intl/en_ALL/mapfiles/openhand.cur),n-resize"}this.cursorgrabvalue=r()}m=null;this.ishwscroll=e.hastransform&&e.opt.hwacceleration&&e.haswrapper;this.delayed=function(a,b,c){var d=e.delaylist[a];var f=(new Date).getTime();if(d&&d.tt)return false;if(d&&d.last+c>f&&!d.tt){e.delaylist[a]={last:f+c,tt:setTimeout(function(){e.delaylist[a].tt=0;b.call()},c)}}else if(!d||!d.tt){e.delaylist[a]={last:f,tt:0};setTimeout(function(){b.call()},0)}};this.requestSync=function(){if(e.onsync)return;k(function(){e.onsync=false;for(name in e.synclist){var a=e.synclist[name];if(a)a.call(e);e.synclist[name]=false}});e.onsync=true};this.synched=function(a,b){e.synclist[a]=b;e.requestSync()};this.css=function(a,b){for(var c in b){e.saved.css.push([a,c,a.css(c)]);a.css(c,b[c])}};this.scrollTop=function(a){return typeof a=="undefined"?e.getScrollTop():e.setScrollTop(a)};BezierClass=function(a,b,c,d,e,f,g){this.st=a;this.ed=b;this.spd=c;this.p1=d||0;this.p2=e||1;this.p3=f||0;this.p4=g||1;this.ts=(new Date).getTime();this.df=this.ed-this.st};BezierClass.prototype={B2:function(a){return 3*a*a*(1-a)},B3:function(a){return 3*a*(1-a)*(1-a)},B4:function(a){return(1-a)*(1-a)*(1-a)},getNow:function(){var a=(new Date).getTime();var b=1-(a-this.ts)/this.spd;var c=this.B2(b)+this.B3(b)+this.B4(b);return b<0?this.ed:this.st+Math.round(this.df*c)},update:function(a,b){this.st=this.getNow();this.ed=a;this.spd=b;this.ts=(new Date).getTime();this.df=this.ed-this.st;return this}};if(this.ishwscroll){this.doc.translate={x:0,y:0};if(this.hastranslate3d)this.doc.css(this.prefixstyle+"backface-visibility","hidden");this.getScrollTop=function(a){if(e.timerscroll&&!a){return e.timerscroll.bz.getNow()}else{return e.doc.translate.y}};if(document.createEvent){this.notifyScrollEvent=function(a){var b=document.createEvent("UIEvents");b.initUIEvent("scroll",false,true,window,1);a.dispatchEvent(b)}}else if(document.fireEvent){this.notifyScrollEvent=function(a){var b=document.createEventObject();a.fireEvent("onscroll");b.cancelBubble=true}}else{this.notifyScrollEvent=function(a){}}if(this.hastranslate3d){this.setScrollTop=function(a,b){e.doc.css(e.trstyle,"translate3d(0px,"+a*-1+"px,0px)");e.doc.translate.y=a;if(!b)e.notifyScrollEvent(e.win[0])}}else{this.setScrollTop=function(a,b){e.doc.css(e.trstyle,"translate(0px,"+a*-1+"px)");e.doc.translate.y=a;if(!b)e.notifyScrollEvent(e.win[0])}}}else{this.getScrollTop=function(){return e.docscroll.scrollTop()};this.setScrollTop=function(a){return e.docscroll.scrollTop(a)}}this.getTarget=function(a){if(!a)return false;if(a.target)return a.target;if(a.srcElement)return a.srcElement;return false};this.hasParent=function(a,b){if(!a)return false;var c=a.target||a.srcElement||a||false;while(c&&c.id!=b){c=c.parentNode||false}return c!==false};var s={thin:1,medium:3,thick:5};this.updateScrollBar=function(a){if(e.ishwscroll){e.rail.css({height:e.win.innerHeight()})}else{var b=e.win.offset();b.top+=t(e.win,"border-top-width",true);b.left+=e.win.outerWidth()-t(e.win,"border-right-width",false)-e.rail.width;var c=e.opt.railoffset;if(c){if(c.top)b.top+=c.top;if(c.left)b.left+=c.left}e.rail.css({top:b.top,left:b.left,height:a?a.h:e.win.innerHeight()});if(e.zoom)e.zoom.css({top:b.top+1,left:b.left-20})}};e.hasanimationframe=k;e.hascancelanimationframe=l;if(!e.hasanimationframe){k=function(a){return setTimeout(a,16)};l=clearInterval}else if(!e.hascancelanimationframe)l=function(){e.cancelAnimationFrame=true};this.init=function(){e.saved.css=[];if(e.isie7mobile)return true;if(e.hasmstouch)e.css(e.ispage?h("html"):e.win,{"-ms-touch-action":"none"});if(!e.ispage||!e.cantouch&&!e.isieold&&!e.isie9mobile){var a=e.docscroll;if(e.ispage)a=e.haswrapper?e.win:e.doc;if(!e.isie9mobile)e.css(a,{"overflow-y":"hidden"});if(e.ispage&&e.isie7&&e.win[0].nodeName=="BODY")e.css(h("html"),{"overflow-y":"hidden"});var b=h(document.createElement("div"));b.css({position:"relative",top:0,"float":"right",width:e.opt.cursorwidth,height:"0px","background-color":e.opt.cursorcolor,border:e.opt.cursorborder,"background-clip":"padding-box","-webkit-border-radius":e.opt.cursorborderradius,"-moz-border-radius":e.opt.cursorborderradius,"border-radius":e.opt.cursorborderradius});b.hborder=parseFloat(b.outerHeight()-b.innerHeight());e.cursor=b;var g=h(document.createElement("div"));g.attr("id",e.id);g.width=Math.max(parseFloat(e.opt.cursorwidth),b.outerWidth());g.css({width:g.width+"px",zIndex:e.ispage?e.opt.zindex:e.opt.zindex+2,background:e.opt.background});var i=["top","bottom","left","right"];for(var k in i){var l=e.opt.railpadding[k];if(l)g.css("padding-"+k,l+"px")}g.append(b);e.rail=g;e.rail.drag=false;var m=false;if(e.opt.boxzoom&&!e.ispage&&!e.isieold){m=document.createElement("div");e.bind(m,"click",e.doZoom);e.zoom=h(m);e.zoom.css({cursor:"pointer","z-index":e.opt.zindex,backgroundImage:"url("+j+"zoomico.png)",height:18,width:18,backgroundPosition:"0px 0px"});if(e.opt.dblclickzoom)e.bind(e.win,"dblclick",e.doZoom);if(e.cantouch&&e.opt.gesturezoom){e.ongesturezoom=function(a){if(a.scale>1.5)e.doZoomIn(a);if(a.scale<.8)e.doZoomOut(a);return e.cancelEvent(a)};e.bind(e.win,"gestureend",e.ongesturezoom)}}if(e.ispage){g.css({position:"fixed",top:"0px",right:"0px",height:"100%"});e.body.append(g)}else{if(e.ishwscroll){if(e.win.css("position")=="static")e.css(e.win,{position:"relative"});var o=e.win[0].nodeName=="HTML"?e.body:e.win;if(e.zoom){e.zoom.css({position:"absolute",top:1,right:0,"margin-right":g.width+4});o.append(e.zoom)}g.css({position:"absolute",top:0,right:0});o.append(g)}else{g.css({position:"absolute"});if(e.zoom)e.zoom.css({position:"absolute"});e.updateScrollBar();e.body.append(g);if(e.zoom)e.body.append(e.zoom)}if(e.isios)e.css(e.win,{"-webkit-tap-highlight-color":"rgba(0,0,0,0)","-webkit-touch-callout":"none"})}if(e.opt.autohidemode===false){e.autohidedom=false}else if(e.opt.autohidemode===true){e.autohidedom=e.rail}else if(e.opt.autohidemode=="cursor"){e.autohidedom=e.cursor}if(e.isie9mobile){e.scrollmom={y:new n(e)};e.onmangotouch=function(a){var b=e.getScrollTop();if(b==e.scrollmom.y.lastscrolly)return true;var c=b-e.mangotouch.sy;if(c==0)return;var d=c<0?-1:1;var f=(new Date).getTime();if(e.mangotouch.lazy)clearTimeout(e.mangotouch.lazy);if(f-e.mangotouch.tm>60||e.mangotouch.dry!=d){e.scrollmom.y.stop();e.scrollmom.y.reset(b);e.mangotouch.sy=b;e.mangotouch.ly=b;e.mangotouch.dry=d;e.mangotouch.tm=f}else{e.scrollmom.y.stop();e.scrollmom.y.update(e.mangotouch.sy-c);var g=f-e.mangotouch.tm;e.mangotouch.tm=f;var h=Math.abs(e.mangotouch.ly-b);e.mangotouch.ly=b;if(h>2){e.mangotouch.lazy=setTimeout(function(){e.mangotouch.lazy=false;e.mangotouch.dry=0;e.mangotouch.tm=0;e.scrollmom.y.doMomentum(g)},80)}}};var p=e.getScrollTop();e.mangotouch={sy:p,ly:p,dry:0,lazy:false,tm:0};e.bind(e.docscroll,"scroll",e.onmangotouch)}else{if(e.cantouch||e.opt.touchbehavior||e.hasmstouch){e.scrollmom={y:new n(e)};e.ontouchstart=function(a){if(a.pointerType&&a.pointerType!=2)return false;if(!e.locked){if(e.hasmstouch){var b=a.target?a.target:false;while(b){var c=h(b).getNiceScroll();if(c.length>0&&c[0].me==e.me)break;if(c.length>0)return false;if(b.nodeName=="DIV"&&b.id==e.id)break;b=b.parentNode?b.parentNode:false}}e.cancelScroll();e.rail.drag={x:a.clientX,y:a.clientY,sx:e.scroll.x,sy:e.scroll.y,st:e.getScrollTop(),pt:2};e.hasmoving=false;e.lastmouseup=false;e.scrollmom.y.reset(a.clientY);if(!e.cantouch&&!e.hasmstouch){var b=e.getTarget(a);var d=b?/INPUT|SELECT|TEXTAREA/i.test(b.nodeName):false;if(!d)return e.cancelEvent(a);if(/SUBMIT|CANCEL|BUTTON/i.test(h(b).attr("type"))){pc={tg:b,click:false};e.preventclick=pc}}}};e.ontouchend=function(a){if(a.pointerType&&a.pointerType!=2)return false;if(e.rail.drag&&e.rail.drag.pt==2){e.scrollmom.y.doMomentum();e.rail.drag=false;if(e.hasmoving){e.hasmoving=false;e.lastmouseup=true;e.hideCursor();if(!e.cantouch)return e.cancelEvent(a)}}};e.ontouchmove=function(a){if(a.pointerType&&a.pointerType!=2)return false;if(e.rail.drag&&e.rail.drag.pt==2){if(e.cantouch&&typeof a.original=="undefined")return true;e.hasmoving=true;if(e.preventclick&&!e.preventclick.click){e.preventclick.click=e.preventclick.tg.onclick||false;e.preventclick.tg.onclick=e.onpreventclick}var b=a.clientY;var c=b-e.rail.drag.y;var d=e.rail.drag.st-c;if(e.ishwscroll){if(d<0){d=Math.round(d/2);b=0}else if(d>e.page.maxh){d=e.page.maxh+Math.round((d-e.page.maxh)/2);b=0}}else{if(d<0)d=0;if(d>e.page.maxh)d=e.page.maxh}e.synched("touchmove",function(){if(e.rail.drag&&e.rail.drag.pt==2){if(e.prepareTransition)e.prepareTransition(0);e.setScrollTop(d);e.showCursor(d);e.scrollmom.y.update(b)}});return e.cancelEvent(a)}}}if(e.cantouch||e.opt.touchbehavior){e.onpreventclick=function(a){if(e.preventclick){e.preventclick.tg.onclick=e.preventclick.click;e.preventclick=false;return e.cancelEvent(a)}};e.onmousedown=e.ontouchstart;e.onmouseup=e.ontouchend;e.onclick=e.isios?false:function(a){if(e.lastmouseup){e.lastmouseup=false;return e.cancelEvent(a)}else{return true}};e.onmousemove=e.ontouchmove;if(e.cursorgrabvalue){e.css(e.ispage?e.doc:e.win,{cursor:e.cursorgrabvalue});e.css(e.rail,{cursor:e.cursorgrabvalue})}}else{e.onmousedown=function(a){if(e.rail.drag&&e.rail.drag.pt!=1)return;if(e.locked)return e.cancelEvent(a);e.cancelScroll();e.rail.drag={x:a.clientX,y:a.clientY,sx:e.scroll.x,sy:e.scroll.y,pt:1};return e.cancelEvent(a)};e.onmouseup=function(a){if(e.rail.drag){if(e.rail.drag.pt!=1)return;e.rail.drag=false;return e.cancelEvent(a)}};e.onmousemove=function(a){if(e.rail.drag){if(e.rail.drag.pt!=1)return;e.scroll.y=e.rail.drag.sy+(a.clientY-e.rail.drag.y);if(e.scroll.y<0)e.scroll.y=0;var b=e.scrollvaluemax;if(e.scroll.y>b)e.scroll.y=b;e.synched("mousemove",function(){if(e.rail.drag&&e.rail.drag.pt==1){e.showCursor();e.cursorfreezed=true;e.doScroll(Math.round(e.scroll.y*e.scrollratio.y))}});return e.cancelEvent(a)}else{e.checkarea=true}}}if(e.cantouch||e.opt.touchbehavior){e.bind(e.win,"mousedown",e.onmousedown)}if(e.hasmstouch){e.css(e.rail,{"-ms-touch-action":"none"});e.css(e.cursor,{"-ms-touch-action":"none"});e.bind(e.win,"MSPointerDown",e.ontouchstart);e.bind(document,"MSPointerUp",e.ontouchend);e.bind(document,"MSPointerMove",e.ontouchmove);e.bind(e.cursor,"MSGestureHold",function(a){a.preventDefault()});e.bind(e.cursor,"contextmenu",function(a){a.preventDefault()})}e.bind(e.cursor,"mousedown",e.onmousedown);e.bind(e.cursor,"mouseup",function(a){if(e.rail.drag&&e.rail.drag.pt==2)return;e.rail.drag=false;e.hasmoving=false;e.hideCursor();return e.cancelEvent(a)});e.bind(document,"mouseup",e.onmouseup);e.bind(document,"mousemove",e.onmousemove);if(e.onclick)e.bind(document,"click",e.onclick);if(!e.cantouch){e.rail.mouseenter(function(){e.showCursor();e.rail.active=true});e.rail.mouseleave(function(){e.rail.active=false;if(!e.rail.drag)e.hideCursor()});if(!e.isiframe)e.bind(e.isie&&e.ispage?document:e.docscroll,"mousewheel",e.onmousewheel);e.bind(e.rail,"mousewheel",e.onmousewheel)}if(e.zoom){e.zoom.mouseenter(function(){e.showCursor();e.rail.active=true});e.zoom.mouseleave(function(){e.rail.active=false;if(!e.rail.drag)e.hideCursor()})}if(!e.ispage&&!e.cantouch&&!/HTML|BODY/.test(e.win[0].nodeName)){if(!e.win.attr("tabindex"))e.win.attr({tabindex:f++});if(e.ischrome&&e.opt.disableoutline)e.win.css({outline:"none"});e.win.focus(function(a){c=e.getTarget(a).id||true;e.hasfocus=true;e.noticeCursor()});e.win.blur(function(a){c=false;e.hasfocus=false});e.win.mouseenter(function(a){d=e.getTarget(a).id||true;e.hasmousefocus=true;e.noticeCursor()});e.win.mouseleave(function(){d=false;e.hasmousefocus=false})}}e.onkeypress=function(a){if(e.locked&&e.page.maxh==0)return true;a=a?a:window.e;var b=e.getTarget(a);if(b&&/INPUT|TEXTAREA|SELECT|OPTION/.test(b.nodeName)){var f=b.getAttribute("type")||b.type||false;if(!f||!/submit|button|cancel/i.tp)return true}if(e.hasfocus||e.hasmousefocus&&!c||e.ispage&&!c&&!d){var g=a.keyCode;if(e.locked&&g!=27)return e.cancelEvent(a);var h=false;switch(g){case 38:case 63233:e.doScrollBy(24*3);h=true;break;case 40:case 63235:e.doScrollBy(-24*3);h=true;break;case 33:case 63276:e.doScrollBy(e.view.h);h=true;break;case 34:case 63277:e.doScrollBy(-e.view.h);h=true;break;case 36:case 63273:e.doScrollTo(0);h=true;break;case 35:case 63275:e.doScrollTo(e.page.maxh);h=true;break;case 32:if(e.opt.spacebarenabled){e.doScrollBy(-e.view.h);h=true}break;case 27:if(e.zoomactive){e.doZoom();h=true}break}if(h)return e.cancelEvent(a)}};e.bind(document,e.isopera?"keypress":"keydown",e.onkeypress);e.bind(window,"resize",e.resize);e.bind(window,"orientationchange",e.resize);e.bind(window,"load",e.resize);e.onAttributeChange=function(a){e.lazyResize()};if(!e.ispage&&!e.haswrapper){if("WebKitMutationObserver"in window){var q=new WebKitMutationObserver(function(a){a.forEach(e.onAttributeChange)});q.observe(e.win[0],{attributes:true,subtree:false})}else{e.bind(e.win,e.isie&&!e.isie9?"propertychange":"DOMAttrModified",e.onAttributeChange);if(e.isie9)e.win[0].attachEvent("onpropertychange",e.onAttributeChange)}}if(!e.ispage&&e.opt.boxzoom)e.bind(window,"resize",e.resizeZoom);if(e.istextarea)e.bind(e.win,"mouseup",e.resize);e.resize()}if(this.doc[0].nodeName=="IFRAME"){function r(a){e.iframexd=false;try{var b="contentDocument"in this?this.contentDocument:this.contentWindow.document;var c=b.domain}catch(a){e.iframexd=true;b=false}if(e.iframexd)return true;if(e.isiframe){e.iframe={html:e.doc.contents().find("html")[0],body:e.doc.contents().find("body")[0]};e.getContentSize=function(){return{w:Math.max(e.iframe.html.scrollWidth,e.iframe.body.scrollWidth),h:Math.max(e.iframe.html.scrollHeight,e.iframe.body.scrollHeight)}};e.docscroll=h(this.contentWindow)}if(e.opt.iframeautoresize&&!e.isiframe){e.win.scrollTop(0);e.doc.height("");var d=Math.max(b.getElementsByTagName("html")[0].scrollHeight,b.body.scrollHeight);e.doc.height(d)}e.resize();if(e.isie7)e.css(h(b).find("html"),{"overflow-y":"hidden"});e.css(h(b.body),{"overflow-y":"hidden"});if("contentWindow"in this){e.bind(this.contentWindow,"scroll",e.onscroll)}else{e.bind(b,"scroll",e.onscroll)}e.bind(b,"mouseup",e.onmouseup);e.bind(b,"mousewheel",e.onmousewheel);e.bind(b,e.isopera?"keypress":"keydown",e.onkeypress);if(e.cantouch||e.opt.touchbehavior){e.bind(b,"mousedown",e.onmousedown);if(e.cursorgrabvalue)e.css(h(b.body),{cursor:e.cursorgrabvalue})}e.bind(b,"mousemove",e.onmousemove);if(e.zoom){if(e.opt.dblclickzoom)e.bind(b,"dblclick",e.doZoom);if(e.ongesturezoom)e.bind(b,"gestureend",e.ongesturezoom)}}if(this.doc[0].readyState&&this.doc[0].readyState=="complete"){setTimeout(function(){r.call(e.doc[0],false)},500)}e.bind(this.doc,"load",r)}};this.showCursor=function(a){if(e.cursortimeout){clearTimeout(e.cursortimeout);e.cursortimeout=0}if(!e.rail)return;if(e.autohidedom)e.autohidedom.stop().css({opacity:e.opt.cursoropacitymax});if(typeof a!="undefined"){e.scroll.y=Math.round(a*1/e.scrollratio.y)}e.cursor.css({height:e.cursorheight,top:e.scroll.y});if(e.zoom)e.zoom.stop().css({opacity:e.opt.cursoropacitymax})};this.hideCursor=function(a){if(e.cursortimeout)return;if(!e.rail)return;if(!e.autohidedom)return;e.cursortimeout=setTimeout(function(){if(!e.rail.active){e.autohidedom.stop().animate({opacity:e.opt.cursoropacitymin});if(e.zoom)e.zoom.stop().animate({opacity:e.opt.cursoropacitymin})}e.cursortimeout=0},a||400)};this.noticeCursor=function(a,b){e.showCursor(b);e.hideCursor(a)};this.getContentSize=e.ispage?function(){return{w:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),h:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}}:e.haswrapper?function(){return{w:e.doc.outerWidth()+parseInt(e.win.css("paddingLeft"))+parseInt(e.win.css("paddingRight")),h:e.doc.outerHeight()+parseInt(e.win.css("paddingTop"))+parseInt(e.win.css("paddingBottom"))}}:function(){return{w:e.docscroll[0].scrollWidth,h:e.docscroll[0].scrollHeight}};this.onResize=function(a,b){if(!e.haswrapper&&!e.ispage){if(e.win.css("display")=="none"){if(e.visibility)e.hideRail();return false}else{if(!e.visibility&&e.getScrollTop()==0)e.doScrollTo(Math.floor(e.scroll.y*e.scrollratio.y));if(!e.hidden&&!e.visibility)e.showRail()}}var c=e.page.maxh;var d=e.page.maxw;var f={h:e.view.h,w:e.view.w};e.view={w:e.ispage?e.win.width():parseInt(e.win[0].clientWidth),h:e.ispage?e.win.height():parseInt(e.win[0].clientHeight)};e.page=b?b:e.getContentSize();e.page.maxh=Math.max(0,e.page.h-e.view.h);e.page.maxw=Math.max(0,e.page.w-e.view.w);if(e.page.maxh==c&&e.page.maxw==d&&e.view.w==f.w){if(!e.ispage){var g=e.win.offset();if(e.lastposition){var h=e.lastposition;if(h.top==g.top&&h.left==g.left)return e}e.lastposition=g}else{return e}}if(e.page.maxh==0){e.hideRail();e.scrollvaluemax=0;e.scroll.y=0;e.scrollratio={x:0,y:0};e.cursorheight=0;e.locked=true;e.setScrollTop(0);return false}else if(!e.hidden&&!e.visibility){e.showRail();e.locked=false}if(e.istextarea&&e.win.css("resize")&&e.win.css("resize")!="none")e.view.h-=20;if(!e.ispage)e.updateScrollBar(e.view);e.cursorheight=Math.min(e.view.h,Math.round(e.view.h*(e.view.h/e.page.h)));e.cursorheight=Math.max(e.opt.cursorminheight,e.cursorheight);e.scrollvaluemax=e.view.h-e.cursorheight-e.cursor.hborder;e.scrollratio={x:0,y:e.page.maxh/e.scrollvaluemax};var i=e.getScrollTop();if(i>e.page.maxh){e.doScroll(e.page.maxh)}else{e.scroll.y=Math.round(e.getScrollTop()*(1/e.scrollratio.y));e.noticeCursor()}return e};this.resize=this.onResize;this.lazyResize=function(){e.delayed("resize",e.resize,250)};this._bind=function(a,b,c,d){e.events.push({e:a,n:b,f:c});{a["on"+b]=c}};this.bind=function(a,b,c,d){var f="jquery"in a?a[0]:a;if(f.addEventListener){if(e.cantouch&&/mouseup|mousedown|mousemove/.test(b)){var g=b=="mousedown"?"touchstart":b=="mouseup"?"touchend":"touchmove";e._bind(f,g,function(a){if(a.touches){if(a.touches.length<2){var b=a.touches.length?a.touches[0]:a;b.original=a;c.call(this,b)}}else if(a.changedTouches){var b=a.changedTouches[0];b.original=a;c.call(this,b)}},d||false)}e._bind(f,b,c,d||false);if(b=="mousewheel")e._bind(f,"DOMMouseScroll",c,d||false);if(e.cantouch&&b=="mouseup")e._bind(f,"touchcancel",c,d||false)}else{e._bind(f,b,function(a){a=a||window.event||false;if(a){if(a.srcElement)a.target=a.srcElement}return c.call(f,a)===false||d===false?e.cancelEvent(a):true})}};this._unbind=function(a,b,c){if(a.removeEventListener){a.removeEventListener(b,c,false)}else if(a.detachEvent){a.detachEvent("on"+b,c)}else{a["on"+b]=false}};this.unbindAll=function(){for(var a=0;a<e.events.length;a++){var b=e.events[a];e._unbind(b.e,b.n,b.f)}};this.cancelEvent=function(a){var a=a.original?a.original:a?a:window.event||false;if(!a)return false;if(a.preventDefault)a.preventDefault();if(a.stopPropagation)a.stopPropagation();if(a.preventManipulation)a.preventManipulation();a.cancelBubble=true;a.cancel=true;a.returnValue=false;return false};this.showRail=function(){if(e.page.maxh!=0&&(e.ispage||e.win.css("display")!="none")){e.visibility=true;e.rail.css("display","block")}return e};this.hideRail=function(){e.visibility=false;e.rail.css("display","none");return e};this.show=function(){e.hidden=false;e.locked=false;return e.showRail()};this.hide=function(){e.hidden=true;e.locked=true;return e.hideRail()};this.remove=function(){e.doZoomOut();e.unbindAll();e.events=[];e.rail.remove();if(e.zoom)e.zoom.remove();e.cursor=false;e.rail=false;e.zoom=false;for(var a=0;a<e.saved.css.length;a++){var b=e.saved.css[a];b[0].css(b[1],typeof b[2]=="undefined"?"":b[2])}e.saved=false;e.me.data("__nicescroll","");return e};this.isScrollable=function(a){var b=a.target?a.target:a;while(b&&b.nodeName&&!/BODY|HTML/.test(b.nodeName)){var c=h(b);var d=c.css("overflowY")||c.css("overflow")||"";if(/scroll|auto/.test(d))return b.clientHeight!=b.scrollHeight;b=b.parentNode?b.parentNode:false}return false};this.onmousewheel=function(a){if(e.locked&&e.page.maxh==0)return true;if(e.opt.preservenativescrolling&&e.checkarea){e.checkarea=false;e.nativescrollingarea=e.isScrollable(a)}if(e.nativescrollingarea)return true;if(e.locked)return e.cancelEvent(a);if(e.rail.drag)return e.cancelEvent(a);var b=0;var b=a.detail?a.detail*-1:a.wheelDelta/40;if(b){if(e.scrollmom)e.scrollmom.y.stop();e.lastdelta+=b*e.opt.mousescrollstep;e.synched("mousewheel",function(){if(!e.rail.drag){var a=e.lastdelta;e.lastdelta=0;e.doScrollBy(a)}})}return e.cancelEvent(a)};this.stop=function(){e.cancelScroll();if(e.scrollmon)e.scrollmon.stop();e.cursorfreezed=false;e.scroll.y=Math.round(e.getScrollTop()*(1/e.scrollratio.y));e.noticeCursor();return e};if(e.ishwscroll&&e.hastransition&&e.opt.usetransition){this.prepareTransition=function(a,b){var c=Math.round(e.opt.scrollspeed*10);var d=Math.min(c,Math.round(a/20*e.opt.scrollspeed));var f=d>20?e.prefixstyle+"transform "+d+"ms ease-out 0s":"";if(!e.lasttransitionstyle||e.lasttransitionstyle!=f){e.lasttransitionstyle=f;e.doc.css(e.transitionstyle,f)}return d};this.doScroll=function(a,b){var c=e.getScrollTop();if(a<0&&c<=0)return e.noticeCursor();else if(a>e.page.maxh&&c>=e.page.maxh){e.checkContentSize();return e.noticeCursor()}e.newscrolly=a;e.newscrollspeed=b||false;if(e.timer)return false;if(!e.scrollendtrapped){e.scrollendtrapped=true;e.bind(e.doc,e.transitionend,e.onScrollEnd,false)}e.timer=setTimeout(function(){var a=e.getScrollTop();var b=e.newscrollspeed?e.newscrollspeed:Math.abs(a-e.newscrolly);var c=e.prepareTransition(b);e.timer=setTimeout(function(){if(e.newscrolly<0&&!e.opt.bouncescroll)e.newscrolly=0;else if(e.newscrolly>e.page.maxh&&!e.opt.bouncescroll)e.newscrolly=e.page.maxh;if(e.newscrolly==e.getScrollTop()){e.timer=0;e.onScrollEnd()}else{var a=e.getScrollTop();if(e.timerscroll&&e.timerscroll.tm)clearInterval(e.timerscroll.tm);if(c>0){e.timerscroll={ts:(new Date).getTime(),s:e.getScrollTop(),e:e.newscrolly,sp:c,bz:new BezierClass(a,e.newscrolly,c,0,1,0,1)};if(!e.cursorfreezed)e.timerscroll.tm=setInterval(function(){e.showCursor(e.getScrollTop())},60)}e.setScrollTop(e.newscrolly);e.timer=0}},15)},e.opt.scrollspeed)};this.cancelScroll=function(){if(!e.scrollendtrapped)return true;var a=e.getScrollTop();e.scrollendtrapped=false;e._unbind(e.doc,e.transitionend,e.onScrollEnd);e.prepareTransition(0);e.setScrollTop(a);if(e.timerscroll&&e.timerscroll.tm)clearInterval(e.timerscroll.tm);e.timerscroll=false;e.cursorfreezed=false;e.noticeCursor(false,a);return e};this.onScrollEnd=function(){e.scrollendtrapped=false;e._unbind(e.doc,e.transitionend,e.onScrollEnd);if(e.timerscroll&&e.timerscroll.tm)clearInterval(e.timerscroll.tm);e.timerscroll=false;e.cursorfreezed=false;var a=e.getScrollTop();e.setScrollTop(a);e.noticeCursor(false,a);if(a<0)e.doScroll(0,60);else if(a>e.page.maxh)e.doScroll(e.page.maxh,60)}}else{this.doScroll=function(a){function g(){if(e.cancelAnimationFrame)return true;f=1-f;if(f)return e.timer=k(g)||1;var a=e.getScrollTop();var b=e.bzscroll?e.bzscroll.getNow():e.newscrolly;var c=b-a;if(c<0&&b<e.newscrolly||c>0&&b>e.newscrolly)b=e.newscrolly;e.setScrollTop(b);if(b==e.newscrolly){e.timer=0;e.cursorfreezed=false;e.bzscroll=false;if(b<0)e.doScroll(0);else if(b>e.page.maxh)e.doScroll(e.page.maxh)}else{e.timer=k(g)||1}}if(e.newscrolly==a)return true;var b=e.getScrollTop();e.newscrolly=a;if(!e.bouncescroll){if(e.newscrolly<0){if(e.newspeedy)e.newspeedy.x=0;e.newscrolly=0}else if(e.newscrolly>e.page.maxh){if(e.newspeedy)e.newspeedy.x=e.page.maxh;e.newscrolly=e.page.maxh}}var c=Math.floor(Math.abs(a-b)/40);if(c>0){var d=Math.min(10,c)*100;e.bzscroll=e.bzscroll?e.bzscroll.update(a,d):new BezierClass(b,a,d,0,1,0,1)}else{e.bzscroll=false}if(e.timer)return;if(b==e.page.maxh&&a>=e.page.maxh)e.checkContentSize();var f=1;e.cancelAnimationFrame=false;e.timer=1;g();if(b==e.page.maxh&&a>=b)e.checkContentSize();e.noticeCursor()};this.cancelScroll=function(){if(e.timer)l(e.timer);e.timer=0;e.bzscroll=false;return e}}this.doScrollBy=function(a,b){var c=0;if(b){c=Math.floor((e.scroll.y-a)*e.scrollratio.y)}else{var d=e.timer?e.newscrolly:e.getScrollTop(true);c=d-a}if(e.bouncescroll){var f=Math.round(e.view.h/2);if(c<-f)c=-f;else if(c>e.page.maxh+f)c=e.page.maxh+f}e.cursorfreezed=false;e.doScroll(c)};this.doScrollTo=function(a,b){var c=b?Math.round(a*e.scrollratio.y):a;if(c<0)c=0;else if(c>e.page.maxh)c=e.page.maxh;e.cursorfreezed=false;e.doScroll(a)};this.checkContentSize=function(){var a=e.getContentSize();if(a.h!=e.page.h)e.resize(false,a)};e.onscroll=function(a){if(e.rail.drag)return;if(!e.cursorfreezed){e.synched("scroll",function(){e.scroll.y=Math.round(e.getScrollTop()*(1/e.scrollratio.y));e.noticeCursor()})}};e.bind(e.docscroll,"scroll",e.onscroll);this.doZoomIn=function(a){if(e.zoomactive)return;e.zoomactive=true;e.zoomrestore={style:{}};var b=["position","top","left","zIndex","backgroundColor","marginTop","marginBottom","marginLeft","marginRight"];var c=e.win[0].style;for(var d in b){var f=b[d];e.zoomrestore.style[f]=typeof c[f]!="undefined"?c[f]:""}e.zoomrestore.style.width=e.win.css("width");e.zoomrestore.style.height=e.win.css("height");e.zoomrestore.padding={w:e.win.outerWidth()-e.win.width(),h:e.win.outerHeight()-e.win.height()};if(e.isios4){e.zoomrestore.scrollTop=h(window).scrollTop();h(window).scrollTop(0)}e.win.css({position:e.isios4?"absolute":"fixed",top:0,left:0,"z-index":e.opt.zindex+100,margin:"0px"});var g=e.win.css("backgroundColor");if(g==""||/transparent|rgba\(0, 0, 0, 0\)|rgba\(0,0,0,0\)/.test(g))e.win.css("backgroundColor","#fff");e.rail.css({"z-index":e.opt.zindex+110});e.zoom.css({"z-index":e.opt.zindex+112});e.zoom.css("backgroundPosition","0px -18px");e.resizeZoom();return e.cancelEvent(a)};this.doZoomOut=function(a){if(!e.zoomactive)return;e.zoomactive=false;e.win.css("margin","");e.win.css(e.zoomrestore.style);if(e.isios4){h(window).scrollTop(e.zoomrestore.scrollTop)}e.rail.css({"z-index":e.ispage?e.opt.zindex:e.opt.zindex+2});e.zoom.css({"z-index":e.opt.zindex});e.zoomrestore=false;e.zoom.css("backgroundPosition","0px 0px");e.onResize();return e.cancelEvent(a)};this.doZoom=function(a){return e.zoomactive?e.doZoomOut(a):e.doZoomIn(a)};this.resizeZoom=function(){if(!e.zoomactive)return;var a=e.getScrollTop();e.win.css({width:h(window).width()-e.zoomrestore.padding.w+"px",height:h(window).height()-e.zoomrestore.padding.h+"px"});e.onResize();e.setScrollTop(Math.min(e.page.maxh,a))};this.init();h.nicescroll.push(this)};var n=function(a){var b=this;this.nc=a;this.lasty=0;this.speedy=0;this.lasttime=0;this.snapy=false;this.demuly=0;this.lastscrolly=-1;this.chky=0;this.timer=0;this.time=function(){return(new Date).getTime()};this.reset=function(a){b.stop();b.lasttime=b.time();b.speedy=0;b.lasty=a;b.lastscrolly=-1};this.update=function(c){b.lasttime=b.time();var d=c-b.lasty;var e=a.getScrollTop();var f=e+d;b.snapy=f<0||f>b.nc.page.maxh;b.speedy=d;b.lasty=c};this.stop=function(){if(b.timer){clearTimeout(b.timer);b.timer=0;b.lastscrolly=-1}};this.doSnapy=function(a){if(a<0){b.nc.doScroll(0,60)}else if(a>b.nc.page.maxh){b.nc.doScroll(b.nc.page.maxh,60)}};this.doMomentum=function(a){var c=b.time();var d=a?c+a:b.lasttime;b.speedy=Math.min(60,b.speedy);var e=d&&c-d<=50;var f=b.speedy&&e?b.speedy:false;if(f){var a=c-d;var g=b.nc.page.maxh;b.demuly=0;b.lastscrolly=b.nc.getScrollTop();b.chky=b.lastscrolly;var h=function(){var c=Math.floor(b.lastscrolly-b.speedy*(1-b.demuly));if(c<0||c>g){b.demuly+=.08}else{b.demuly+=.01}b.lastscrolly=c;b.nc.synched("domomentum",function(){var a=b.nc.getScrollTop();if(a!=b.chky)b.stop();b.chky=c;b.nc.setScrollTop(c);if(b.timer){b.nc.showCursor(c)}else{b.nc.hideCursor();b.doSnapy(c)}});if(b.demuly<1){b.timer=setTimeout(h,a)}else{b.timer=0}};h()}else{if(b.snapy){b.doSnapy(b.nc.getScrollTop())}}}};var o=b.fn.scrollTop;h.cssHooks.scrollTop={get:function(a,b,c){var d=h.data(a,"__nicescroll")||false;return d&&d.ishwscroll?d.getScrollTop():o.call(a)},set:function(a,b){var c=h.data(a,"__nicescroll")||false;c&&c.ishwscroll?c.setScrollTop(parseInt(b)):o.call(a,b);return this}};b.fn.scrollTop=function(a){if(typeof a=="undefined"){var b=this[0]?h.data(this[0],"__nicescroll")||false:false;return b&&b.ishwscroll?b.getScrollTop():o.call(this)}else{return this.each(function(){var b=h.data(this,"__nicescroll")||false;b&&b.ishwscroll?b.setScrollTop(parseInt(a)):o.call(h(this),a)})}};var p=function(b){var c=this;this.length=0;this.name="nicescrollarray";this.each=function(a){for(var b=0;b<c.length;b++)a.call(c[b]);return c};this.push=function(a){c[c.length]=a;c.length++};this.eq=function(a){return c[a]};if(b){for(a=0;a<b.length;a++){var d=h.data(b[a],"__nicescroll")||false;if(d){this[this.length]=d;this.length++}}}return this};q(p.prototype,["show","hide","onResize","resize","remove","stop"],function(a,b){a[b]=function(){return this.each(function(){this[b].call()})}});b.fn.getNiceScroll=function(a){if(typeof a=="undefined"){return new p(this)}else{var b=h.data(this[a],"__nicescroll")||false;return b}};b.extend(b.expr[":"],{nicescroll:function(a){return h.data(a,"__nicescroll")?true:false}});h.fn.niceScroll=function(a,b){if(typeof b=="undefined"){if(typeof a=="object"&&!("jquery"in a)){b=a;a=false}}var c=new p;if(typeof b=="undefined")b={};if(a||false){b.doc=h(a);b.win=h(this)}var d=!("doc"in b);if(!d&&!("win"in b))b.win=h(this);this.each(function(){var a=h(this).data("__nicescroll")||false;if(!a){b.doc=d?h(this):b.doc;a=new m(b,h(this));h(this).data("__nicescroll",a)}c.push(a)});return c.length==1?c[0]:c};window.NiceScroll={getjQuery:function(){return b}};if(!h.nicescroll){h.nicescroll=new p}})(jQuery)